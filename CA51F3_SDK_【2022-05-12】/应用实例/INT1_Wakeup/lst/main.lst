C51 COMPILER V9.02   MAIN                                                                  10/23/2021 15:58:51 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\output\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE source\main.c OMF2 BROWSE DEBUG PRINT(.\lst\main.lst) OBJECT(.\output\ma
                    -in.obj)

line level    source

   1          
   2          #ifndef _MAIN_C_
   3          #define _MAIN_C_
   4          /*********************************************************************************************************
             -************/
   5          #include "include/ca51f_config.h"               
   6          #include "include/ca51f3sfr.h"
   7          #include "include/ca51f3xsfr.h"
   8          #include "include/gpiodef_f3.h"
   9          #include "include/system_clock.h"
  10          
  11          #include "include/uart.h"
  12          #include "include/delay.h"
  13          #include <intrins.h>
  14          /*********************************************************************************************************
             -************/
  15          
  16          /*********************************************************************************************************
             -************
  17                  INT1控制例程
  18          **********************************************************************************************************
             -***********/
  19          enum 
  20          {
  21                  P00_INDEX = 0,
  22                  P01_INDEX = 1,
  23                  P02_INDEX = 2,
  24                  P03_INDEX = 3,
  25                  P04_INDEX = 4,
  26                  P05_INDEX = 5,
  27                  P06_INDEX = 6,
  28                  P07_INDEX = 7,
  29          
  30                  P10_INDEX = 8,
  31                  P11_INDEX = 9,
  32                  P12_INDEX = 10,
  33                  P13_INDEX = 11,
  34                  P14_INDEX = 12,
  35                  P15_INDEX = 13,
  36                  P16_INDEX = 14,
  37                  P17_INDEX = 15,
  38          
  39                  P20_INDEX = 16,
  40                  P21_INDEX = 17,
  41          
  42                  P30_INDEX = 24,
  43                  P31_INDEX = 25,
  44                  P32_INDEX = 26,
  45                  P33_INDEX = 27,
  46                  P34_INDEX = 28,
  47                  P35_INDEX = 29,
  48                  P36_INDEX = 30,
  49                  P37_INDEX = 31,
  50          };
C51 COMPILER V9.02   MAIN                                                                  10/23/2021 15:58:51 PAGE 2   

  51          bit int1_flag;
  52          void INT1_init(void)
  53          {
  54   1              P10F = INPUT;                                   //P10设置为输入功能
  55   1              IT1CON = P10_INDEX;                             //设置P10为INT1中断引脚
  56   1              EX1 = 1;                                                //INT1中断使能
  57   1              IE1 = 1;                                                //外部中断1中断使能
  58   1              IT1 = 1;                                                //设置INT1为下降沿触发
  59   1              PX1 = 1;                                                //设置INT1中断为最高优先级
  60   1              
  61   1              int1_flag = 0;
  62   1      }
  63          void INT1_ISR (void) interrupt 2
  64          {
  65   1              int1_flag = 1;                  
  66   1      }
  67          void main(void)
  68          {
  69   1      #ifdef LVD_RST_ENABLE
  70   1              LVDCON = 0xE1;                                  //设置LVD复位电压为2V
  71   1      #endif
  72   1      #if (SYSCLK_SRC == PLL)
                      Sys_Clk_Set_PLL(PLL_Multiple);  //设置系统时钟为PLL，PLL_Multiple为倍频倍数
              #endif
  75   1              
  76   1      #ifdef UART0_EN
                      Uart0_Initial(UART0_BAUTRATE);  //初始化UART0
              #endif
  79   1              
  80   1      #ifdef UART1_EN
                      Uart1_Initial(UART1_BAUTRATE);  //初始化UART1
              #endif
  83   1      
  84   1              EA = 1;                                                                                                 //开全局中断
  85   1      
  86   1      #ifdef PRINT_EN
                      uart_printf("INT1 Demo Code\n");
              #endif
  89   1      
  90   1      
  91   1              INT1_init();
  92   1      //      P00F = OUTPUT;  
  93   1              while(1)
  94   1              {
  95   2                      if(int1_flag)           
  96   2                      {
  97   3                              int1_flag = 0;
  98   3      //                      P00 = ~P00;
  99   3                      #ifdef PRINT_EN
                                      uart_printf("INT1\n");
                              #endif
 102   3                      }
 103   2              }
 104   1      }
 105          #endif


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     41    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
C51 COMPILER V9.02   MAIN                                                                  10/23/2021 15:58:51 PAGE 3   

   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
